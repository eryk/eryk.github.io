---
title: 在MacBook中导入Redis源码并调试
date: 2021-10-15 11:34:00
categories: ["cpp"]
---

# 下载Redis源码

```shell
git clone -b 6.2 https://github.com/redis/redis.git
```

# CLion导入Redis

![image-20211016003737364](https://raw.githubusercontent.com/eryk/blog_img/master/image-20211016003737364.png)

启动IDE之后弹出如下弹窗点击OK

![image-20211016003853027](https://raw.githubusercontent.com/eryk/blog_img/master/image-20211016003853027.png)

等导入项目加载完成之后，在IDE中打开Makefileb并点击第三行的绿色箭头执行make操作

![image-20211016003943812](https://raw.githubusercontent.com/eryk/blog_img/master/image-20211016003943812.png)

运行完成之后会在src目录下出现编译好的.o文件，比如redis-cli.o和redis-server.o

# 运行redis-server debug 模式

![image-20211016004602127](https://raw.githubusercontent.com/eryk/blog_img/master/image-20211016004602127.png)

找到Edit Configurations后打开，在Target中选择reids-server，Executable中找到src/redis-server，设置启动参数指定redis.conf

![image-20211016004551730](https://raw.githubusercontent.com/eryk/blog_img/master/image-20211016004551730.png)

设置好之后运行，提示如下错误

![image-20211016001810427](https://raw.githubusercontent.com/eryk/blog_img/master/image-20211016001810427.png)

### 安装pkg-config

```
brew install pkg-config
```

再次运行redis-server的debug模式启动成功

![image-20211016002810464](https://raw.githubusercontent.com/eryk/blog_img/master/image-20211016002810464.png)

# 参考

https://www.modb.pro/db/73281

https://zhuanlan.zhihu.com/p/339812402

https://www.jianshu.com/p/904b44911ab9

https://github.com/LHRchina/redis